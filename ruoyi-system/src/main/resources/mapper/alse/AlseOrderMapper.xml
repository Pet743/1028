<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.alse.mapper.AlseOrderMapper">
    
    <resultMap type="AlseOrder" id="AlseOrderResult">
        <result property="orderId"    column="order_id"    />
        <result property="orderNo"    column="order_no"    />
        <result property="productId"    column="product_id"    />
        <result property="productName"    column="product_name"    />
        <result property="productImageUrl"    column="product_image_url"    />
        <result property="productPrice"    column="product_price"    />
        <result property="quantity"    column="quantity"    />
        <result property="totalAmount"    column="total_amount"    />
        <result property="paymentMethod"    column="payment_method"    />
        <result property="paymentAccount"    column="payment_account"    />
        <result property="receivingMethod"    column="receiving_method"    />
        <result property="receivingAccount"    column="receiving_account"    />
        <result property="buyerId"    column="buyer_id"    />
        <result property="buyerPhone"    column="buyer_phone"    />
        <result property="buyerName"    column="buyer_name"    />
        <result property="sellerId"    column="seller_id"    />
        <result property="sellerPhone"    column="seller_phone"    />
        <result property="sellerName"    column="seller_name"    />
        <result property="orderStatus"    column="order_status"    />
        <result property="shopId"    column="shop_id"    />
        <result property="shopName"    column="shop_name"    />
        <result property="walletTransactionId"    column="wallet_transaction_id"    />
        <result property="shippingAddressId"    column="shipping_address_id"    />
        <result property="shippingAddress"    column="shipping_address"    />
        <result property="logisticsCompany"    column="logistics_company"    />
        <result property="logisticsNo"    column="logistics_no"    />
        <result property="paymentTime"    column="payment_time"    />
        <result property="shippingTime"    column="shipping_time"    />
        <result property="receivingTime"    column="receiving_time"    />
        <result property="status"    column="status"    />
        <result property="createBy"    column="create_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="updateTime"    column="update_time"    />
        <result property="remark"    column="remark"    />
    </resultMap>

    <sql id="selectAlseOrderVo">
        select order_id, order_no, product_id, product_name, product_image_url, product_price, quantity, total_amount, payment_method, payment_account, receiving_method, receiving_account, buyer_id, buyer_phone, buyer_name, seller_id, seller_phone, seller_name, order_status, shop_id, shop_name, wallet_transaction_id, shipping_address_id, shipping_address, logistics_company, logistics_no, payment_time, shipping_time, receiving_time, status, create_by, create_time, update_by, update_time, remark from alse_order
    </sql>

    <select id="selectAlseOrderList" parameterType="AlseOrder" resultMap="AlseOrderResult">
        <include refid="selectAlseOrderVo"/>
        <where>  
            <if test="orderNo != null  and orderNo != ''"> and order_no = #{orderNo}</if>
            <if test="productId != null "> and product_id = #{productId}</if>
            <if test="productName != null  and productName != ''"> and product_name like concat('%', #{productName}, '%')</if>
            <if test="productImageUrl != null  and productImageUrl != ''"> and product_image_url = #{productImageUrl}</if>
            <if test="productPrice != null "> and product_price = #{productPrice}</if>
            <if test="quantity != null "> and quantity = #{quantity}</if>
            <if test="totalAmount != null "> and total_amount = #{totalAmount}</if>
            <if test="paymentMethod != null "> and payment_method = #{paymentMethod}</if>
            <if test="paymentAccount != null  and paymentAccount != ''"> and payment_account = #{paymentAccount}</if>
            <if test="receivingMethod != null "> and receiving_method = #{receivingMethod}</if>
            <if test="receivingAccount != null  and receivingAccount != ''"> and receiving_account = #{receivingAccount}</if>
            <if test="buyerId != null "> and buyer_id = #{buyerId}</if>
            <if test="buyerPhone != null  and buyerPhone != ''"> and buyer_phone = #{buyerPhone}</if>
            <if test="buyerName != null  and buyerName != ''"> and buyer_name like concat('%', #{buyerName}, '%')</if>
            <if test="sellerId != null "> and seller_id = #{sellerId}</if>
            <if test="sellerPhone != null  and sellerPhone != ''"> and seller_phone = #{sellerPhone}</if>
            <if test="sellerName != null  and sellerName != ''"> and seller_name like concat('%', #{sellerName}, '%')</if>
            <if test="orderStatus != null "> and order_status = #{orderStatus}</if>
            <if test="shopId != null "> and shop_id = #{shopId}</if>
            <if test="shopName != null  and shopName != ''"> and shop_name like concat('%', #{shopName}, '%')</if>
            <if test="walletTransactionId != null "> and wallet_transaction_id = #{walletTransactionId}</if>
            <if test="shippingAddressId != null "> and shipping_address_id = #{shippingAddressId}</if>
            <if test="shippingAddress != null  and shippingAddress != ''"> and shipping_address = #{shippingAddress}</if>
            <if test="logisticsCompany != null  and logisticsCompany != ''"> and logistics_company = #{logisticsCompany}</if>
            <if test="logisticsNo != null  and logisticsNo != ''"> and logistics_no = #{logisticsNo}</if>
            <if test="paymentTime != null "> and payment_time = #{paymentTime}</if>
            <if test="shippingTime != null "> and shipping_time = #{shippingTime}</if>
            <if test="receivingTime != null "> and receiving_time = #{receivingTime}</if>
            <if test="status != null and status != ''"> and status = #{status}</if>
            <if test="params.beginCreateTime != null and params.beginCreateTime != ''"> and create_time &gt;= #{params.beginCreateTime}</if>
            <if test="params.endCreateTime != null and params.endCreateTime != ''"> and create_time &lt;= #{params.endCreateTime}</if>
        </where>
        order by create_time desc
    </select>
    
    <select id="selectAlseOrderByOrderId" parameterType="Long" resultMap="AlseOrderResult">
        <include refid="selectAlseOrderVo"/>
        where order_id = #{orderId}
    </select>

    <insert id="insertAlseOrder" parameterType="AlseOrder" useGeneratedKeys="true" keyProperty="orderId">
        insert into alse_order
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="orderNo != null and orderNo != ''">order_no,</if>
            <if test="productId != null">product_id,</if>
            <if test="productName != null and productName != ''">product_name,</if>
            <if test="productImageUrl != null">product_image_url,</if>
            <if test="productPrice != null">product_price,</if>
            <if test="quantity != null">quantity,</if>
            <if test="totalAmount != null">total_amount,</if>
            <if test="paymentMethod != null">payment_method,</if>
            <if test="paymentAccount != null">payment_account,</if>
            <if test="receivingMethod != null">receiving_method,</if>
            <if test="receivingAccount != null">receiving_account,</if>
            <if test="buyerId != null">buyer_id,</if>
            <if test="buyerPhone != null">buyer_phone,</if>
            <if test="buyerName != null">buyer_name,</if>
            <if test="sellerId != null">seller_id,</if>
            <if test="sellerPhone != null">seller_phone,</if>
            <if test="sellerName != null">seller_name,</if>
            <if test="orderStatus != null">order_status,</if>
            <if test="shopId != null">shop_id,</if>
            <if test="shopName != null">shop_name,</if>
            <if test="walletTransactionId != null">wallet_transaction_id,</if>
            <if test="shippingAddressId != null">shipping_address_id,</if>
            <if test="shippingAddress != null">shipping_address,</if>
            <if test="logisticsCompany != null">logistics_company,</if>
            <if test="logisticsNo != null">logistics_no,</if>
            <if test="paymentTime != null">payment_time,</if>
            <if test="shippingTime != null">shipping_time,</if>
            <if test="receivingTime != null">receiving_time,</if>
            <if test="status != null">status,</if>
            <if test="createBy != null">create_by,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="remark != null">remark,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="orderNo != null and orderNo != ''">#{orderNo},</if>
            <if test="productId != null">#{productId},</if>
            <if test="productName != null and productName != ''">#{productName},</if>
            <if test="productImageUrl != null">#{productImageUrl},</if>
            <if test="productPrice != null">#{productPrice},</if>
            <if test="quantity != null">#{quantity},</if>
            <if test="totalAmount != null">#{totalAmount},</if>
            <if test="paymentMethod != null">#{paymentMethod},</if>
            <if test="paymentAccount != null">#{paymentAccount},</if>
            <if test="receivingMethod != null">#{receivingMethod},</if>
            <if test="receivingAccount != null">#{receivingAccount},</if>
            <if test="buyerId != null">#{buyerId},</if>
            <if test="buyerPhone != null">#{buyerPhone},</if>
            <if test="buyerName != null">#{buyerName},</if>
            <if test="sellerId != null">#{sellerId},</if>
            <if test="sellerPhone != null">#{sellerPhone},</if>
            <if test="sellerName != null">#{sellerName},</if>
            <if test="orderStatus != null">#{orderStatus},</if>
            <if test="shopId != null">#{shopId},</if>
            <if test="shopName != null">#{shopName},</if>
            <if test="walletTransactionId != null">#{walletTransactionId},</if>
            <if test="shippingAddressId != null">#{shippingAddressId},</if>
            <if test="shippingAddress != null">#{shippingAddress},</if>
            <if test="logisticsCompany != null">#{logisticsCompany},</if>
            <if test="logisticsNo != null">#{logisticsNo},</if>
            <if test="paymentTime != null">#{paymentTime},</if>
            <if test="shippingTime != null">#{shippingTime},</if>
            <if test="receivingTime != null">#{receivingTime},</if>
            <if test="status != null">#{status},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
            <if test="remark != null">#{remark},</if>
         </trim>
    </insert>

    <update id="updateAlseOrder" parameterType="AlseOrder">
        update alse_order
        <trim prefix="SET" suffixOverrides=",">
            <if test="orderNo != null and orderNo != ''">order_no = #{orderNo},</if>
            <if test="productId != null">product_id = #{productId},</if>
            <if test="productName != null and productName != ''">product_name = #{productName},</if>
            <if test="productImageUrl != null">product_image_url = #{productImageUrl},</if>
            <if test="productPrice != null">product_price = #{productPrice},</if>
            <if test="quantity != null">quantity = #{quantity},</if>
            <if test="totalAmount != null">total_amount = #{totalAmount},</if>
            <if test="paymentMethod != null">payment_method = #{paymentMethod},</if>
            <if test="paymentAccount != null">payment_account = #{paymentAccount},</if>
            <if test="receivingMethod != null">receiving_method = #{receivingMethod},</if>
            <if test="receivingAccount != null">receiving_account = #{receivingAccount},</if>
            <if test="buyerId != null">buyer_id = #{buyerId},</if>
            <if test="buyerPhone != null">buyer_phone = #{buyerPhone},</if>
            <if test="buyerName != null">buyer_name = #{buyerName},</if>
            <if test="sellerId != null">seller_id = #{sellerId},</if>
            <if test="sellerPhone != null">seller_phone = #{sellerPhone},</if>
            <if test="sellerName != null">seller_name = #{sellerName},</if>
            <if test="orderStatus != null">order_status = #{orderStatus},</if>
            <if test="shopId != null">shop_id = #{shopId},</if>
            <if test="shopName != null">shop_name = #{shopName},</if>
            <if test="walletTransactionId != null">wallet_transaction_id = #{walletTransactionId},</if>
            <if test="shippingAddressId != null">shipping_address_id = #{shippingAddressId},</if>
            <if test="shippingAddress != null">shipping_address = #{shippingAddress},</if>
            <if test="logisticsCompany != null">logistics_company = #{logisticsCompany},</if>
            <if test="logisticsNo != null">logistics_no = #{logisticsNo},</if>
            <if test="paymentTime != null">payment_time = #{paymentTime},</if>
            <if test="shippingTime != null">shipping_time = #{shippingTime},</if>
            <if test="receivingTime != null">receiving_time = #{receivingTime},</if>
            <if test="status != null">status = #{status},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="remark != null">remark = #{remark},</if>
        </trim>
        where order_id = #{orderId}
    </update>

    <delete id="deleteAlseOrderByOrderId" parameterType="Long">
        delete from alse_order where order_id = #{orderId}
    </delete>

    <delete id="deleteAlseOrderByOrderIds" parameterType="String">
        delete from alse_order where order_id in 
        <foreach item="orderId" collection="array" open="(" separator="," close=")">
            #{orderId}
        </foreach>
    </delete>
</mapper>